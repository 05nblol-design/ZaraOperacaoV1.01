{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "Dockerfile"
  },
  "deploy": {
    "numReplicas": 1,
    "sleepApplication": false,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  },
  "environments": {
    "production": {
      "variables": {
        "NODE_ENV": "production",
        "PORT": "${{ PORT }}",
        "DATABASE_URL": "${{ zara-postgres.DATABASE_URL }}",
        "JWT_SECRET": "${{ JWT_SECRET }}",
        "JWT_EXPIRES_IN": "7d",
        "CORS_ORIGIN": "${{ CORS_ORIGIN }}",
        "UPLOAD_MAX_SIZE": "10485760",
        "UPLOAD_ALLOWED_TYPES": "image/jpeg,image/png,image/gif,image/webp,application/pdf",
        "UPLOAD_DIR": "./uploads",
        "EMAIL_HOST": "${{ EMAIL_HOST }}",
        "EMAIL_PORT": "${{ EMAIL_PORT }}",
        "EMAIL_SECURE": "${{ EMAIL_SECURE }}",
        "EMAIL_USER": "${{ EMAIL_USER }}",
        "EMAIL_PASS": "${{ EMAIL_PASS }}",
        "EMAIL_FROM": "${{ EMAIL_FROM }}",
        "REDIS_URL": "${{ REDIS_URL }}",
        "FIREBASE_PROJECT_ID": "${{ FIREBASE_PROJECT_ID }}",
        "FIREBASE_PRIVATE_KEY": "${{ FIREBASE_PRIVATE_KEY }}",
        "FIREBASE_CLIENT_EMAIL": "${{ FIREBASE_CLIENT_EMAIL }}",
        "SENTRY_DSN": "${{ SENTRY_DSN }}",
        "LOG_LEVEL": "info",
        "LOG_FILE": "logs/app.log",
        "RATE_LIMIT_WINDOW_MS": "900000",
        "RATE_LIMIT_MAX_REQUESTS": "100",
        "SESSION_SECRET": "${{ SESSION_SECRET }}",
        "TRUST_PROXY": "true",
        "SECURE_COOKIES": "true",
        "APP_NAME": "Sistema ZARA",
        "APP_VERSION": "1.0.1",
        "APP_URL": "${{ APP_URL }}"
      }
    }
  },
  "regions": ["us-west1"],
  "services": [
    {
      "name": "zara-backend",
      "source": {
        "type": "dockerfile",
        "dockerfile": "Dockerfile"
      },
      "variables": {
        "NODE_ENV": "production"
      }
    }
  ]
}