import{j as e}from"./query-B88w_-l3.js";import{r as t}from"./vendor-BKU87Gzz.js";import{u as z,L as k,W as M,J as $,Q as E,c as T,N as G,K as o}from"./index-DY2ZM4tI.js";import{F as O}from"./PencilIcon-c7Nm3ZXQ.js";import{F as C}from"./CheckIcon-DeOLvj_K.js";import{F as U}from"./CameraIcon-C8z062Q3.js";import{F as B}from"./EnvelopeIcon-6kO86Iod.js";import{F as Q}from"./CalendarIcon-C8U54hvR.js";import"./router-Cr3qqr-L.js";import"./utils-CZH8StwO.js";function H({title:r,titleId:c,...u},l){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":c},u),r?t.createElement("title",{id:c},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const W=t.forwardRef(H),se=()=>{const{user:r,updateProfile:c,changePassword:u}=z(),[l,f]=t.useState(!1),[m,g]=t.useState(!1),[v,h]=t.useState(!1),[b,N]=t.useState(!1),i=t.useRef(null),[y,p]=t.useState({name:"",email:""}),[n,w]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""});t.useEffect(()=>{r&&p({name:r.name||"",email:r.email||""})},[r]);const P=a=>{const{name:s,value:x}=a.target;p(d=>({...d,[s]:x}))},j=a=>{const{name:s,value:x}=a.target;w(d=>({...d,[s]:x}))},R=async()=>{g(!0);try{await c(y),f(!1),o.success("Perfil atualizado com sucesso!")}catch(a){o.error("Erro ao atualizar perfil: "+a.message)}finally{g(!1)}},S=async a=>{if(a.preventDefault(),n.newPassword!==n.confirmPassword){o.error("As senhas não coincidem");return}if(n.newPassword.length<6){o.error("A nova senha deve ter pelo menos 6 caracteres");return}g(!0);try{await u(n.currentPassword,n.newPassword),o.success("Senha alterada com sucesso!"),w({currentPassword:"",newPassword:"",confirmPassword:""}),h(!1)}catch(s){o.error(s.message||"Erro ao alterar senha")}finally{g(!1)}},F=()=>{l&&i.current&&i.current.click()},D=async a=>{const s=a.target.files[0];if(!s)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type)){o.error("Tipo de arquivo não permitido. Use JPEG, PNG ou WebP");return}if(s.size>2*1024*1024){o.error("Arquivo muito grande. Máximo 2MB");return}N(!0);try{const d=new FormData;d.append("avatar",s);const A=await(await fetch("/api/upload/avatar",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:d})).json();if(A.success)o.success("Avatar atualizado com sucesso!"),window.location.reload();else throw new Error(A.message||"Erro ao fazer upload do avatar")}catch(d){console.error("Erro no upload:",d),o.error(d.message||"Erro ao fazer upload do avatar")}finally{N(!1),i.current&&(i.current.value="")}},L=a=>({ADMIN:"Administrador",MANAGER:"Gerente",LEADER:"Líder",OPERATOR:"Operador",QUALITY:"Qualidade"})[a]||a,I=a=>({ADMIN:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",MANAGER:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",LEADER:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",OPERATOR:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",QUALITY:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"})[a]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return r?e.jsxs(e.Fragment,{children:[e.jsxs(M,{children:[e.jsx("title",{children:"Meu Perfil - Sistema ZARA"}),e.jsx("meta",{name:"description",content:"Gerenciar perfil do usuário"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Meu Perfil"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gerencie suas informações pessoais e configurações de conta"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Informações Pessoais"}),l?e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:R,disabled:m,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[m?e.jsx(k,{size:"xs",className:"mr-2"}):e.jsx(C,{className:"h-4 w-4 mr-2"}),"Salvar"]}),e.jsxs("button",{onClick:()=>{f(!1),p({name:r.name||"",email:r.email||"",phone:r.phone||"",department:r.department||"",position:r.position||""})},className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]}):e.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Editar"]})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-20 w-20 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center overflow-hidden",children:[r.avatar?e.jsx("img",{src:r.avatar,alt:"Avatar",className:"h-full w-full object-cover",onError:a=>{a.target.style.display="none",a.target.nextSibling.style.display="flex"}}):null,e.jsx(E,{className:"h-10 w-10 text-gray-500 dark:text-gray-400",style:{display:r.avatar?"none":"flex"}})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:F,disabled:b,className:"absolute bottom-0 right-0 h-6 w-6 rounded-full bg-blue-600 text-white flex items-center justify-center hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",title:"Alterar foto do perfil",children:b?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border border-white border-t-transparent"}):e.jsx(U,{className:"h-3 w-3"})}),e.jsx("input",{ref:i,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:D,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email}),b&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Enviando foto..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome Completo"}),l?e.jsx("input",{type:"text",name:"name",value:y.name,onChange:P,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}):e.jsxs("div",{className:"flex items-center space-x-2 text-gray-900 dark:text-white",children:[e.jsx(E,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:r.name||"Não informado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),l?e.jsx("input",{type:"email",name:"email",value:y.email,onChange:P,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}):e.jsxs("div",{className:"flex items-center space-x-2 text-gray-900 dark:text-white",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:r.email||"Não informado"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg mt-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Segurança"}),e.jsxs("button",{onClick:()=>h(!v),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Alterar Senha"]})]})}),v&&e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Senha Atual"}),e.jsx("input",{type:"password",name:"currentPassword",value:n.currentPassword,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nova Senha"}),e.jsx("input",{type:"password",name:"newPassword",value:n.newPassword,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirmar Nova Senha"}),e.jsx("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:S,disabled:m,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[m?e.jsx(k,{size:"xs",className:"mr-2"}):e.jsx(C,{className:"h-4 w-4 mr-2"}),"Alterar Senha"]}),e.jsx("button",{onClick:()=>{h(!1),w({currentPassword:"",newPassword:"",confirmPassword:""})},className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Informações da Conta"})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Função"}),e.jsx("div",{className:"mt-1",children:e.jsxs("span",{className:T("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",I(r.role)),children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),L(r.role)]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Data de Cadastro"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2 text-gray-900 dark:text-white",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:r.createdAt?new Date(r.createdAt).toLocaleDateString("pt-BR"):"Não informado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Ativo"})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Atividade Recente"})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Estatísticas de atividade em breve..."})})]})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(k,{size:"lg",text:"Carregando perfil..."})})};export{se as default};
//# sourceMappingURL=Profile-By8UV-3w.js.map
