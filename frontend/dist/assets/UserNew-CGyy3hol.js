import{j as e}from"./query-B88w_-l3.js";import{r as o}from"./vendor-BKU87Gzz.js";import{u as k,W as C,m as b,k as A,e as F,b as R,c as E,r as S}from"./index-DY2ZM4tI.js";import{a as D}from"./router-Cr3qqr-L.js";import{F as U}from"./ArrowLeftIcon-DeKPabn9.js";import{F as O}from"./EyeSlashIcon-Diu9gw8K.js";import"./utils-CZH8StwO.js";const V=()=>{const c=D(),{user:n}=k(),[d,u]=o.useState(!1),[x,h]=o.useState(null),[g,p]=o.useState(!1),[m,f]=o.useState(!1),[s,N]=o.useState({name:"",email:"",password:"",badgeNumber:"",role:"OPERATOR",isActive:!0}),j=[{value:"OPERATOR",label:"Operador"},{value:"LEADER",label:"Líder"},{value:"MANAGER",label:"Gestor"},{value:"ADMIN",label:"Administrador"}],a=r=>{const{name:l,value:i,type:t,checked:v}=r.target;N(w=>({...w,[l]:t==="checkbox"?v:i}))},y=async r=>{var l,i;r.preventDefault(),u(!0),h(null);try{(await S.post("/users",s)).data.success&&(p(!0),setTimeout(()=>{c("/users")},2e3))}catch(t){console.error("Erro ao criar usuário:",t),h(((i=(l=t.response)==null?void 0:l.data)==null?void 0:i.message)||"Erro ao criar usuário")}finally{u(!1)}};return["MANAGER","ADMIN"].includes(n==null?void 0:n.role)?e.jsxs(e.Fragment,{children:[e.jsx(C,{children:e.jsx("title",{children:"Novo Usuário - Zara Operação"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>c("/users"),className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),"Voltar"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Novo Usuário"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Criar um novo usuário no sistema"})]})]})}),x&&e.jsx(b.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(A,{className:"h-5 w-5 text-red-400"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:x})})]})}),g&&e.jsx(b.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(F,{className:"h-5 w-5 text-green-400"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-green-800",children:"Usuário criado com sucesso! Redirecionando..."})})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nome Completo *"}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:s.name,onChange:a,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Digite o nome completo"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email *"}),e.jsx("input",{type:"email",name:"email",id:"email",required:!0,value:s.email,onChange:a,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"usuario@empresa.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"badgeNumber",className:"block text-sm font-medium text-gray-700",children:"Número do Crachá"}),e.jsx("input",{type:"text",name:"badgeNumber",id:"badgeNumber",value:s.badgeNumber,onChange:a,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ex: 171516",maxLength:20}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Número único de identificação do crachá"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha *"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:m?"text":"password",name:"password",id:"password",required:!0,value:s.password,onChange:a,className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10",placeholder:"Digite a senha",minLength:6}),e.jsx("button",{type:"button",onClick:()=>f(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m?e.jsx(O,{className:"h-5 w-5 text-gray-400"}):e.jsx(R,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mínimo de 6 caracteres"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Função *"}),e.jsx("select",{name:"role",id:"role",required:!0,value:s.role,onChange:a,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:j.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isActive",id:"isActive",checked:s.isActive,onChange:a,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Usuário ativo"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>c("/users"),className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:d,className:E("py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white",d?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:d?"Criando...":"Criar Usuário"})]})]})})})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600",children:"Você não tem permissão para criar usuários."})]})})};export{V as default};
//# sourceMappingURL=UserNew-CGyy3hol.js.map
