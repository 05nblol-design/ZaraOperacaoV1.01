import{j as e}from"./query-B88w_-l3.js";import{r as n}from"./vendor-BKU87Gzz.js";import{c as de,a as le,L as b}from"./router-Cr3qqr-L.js";import{u as ie,f as ne,F as ce,W as oe,c as i,q as h,C as xe,P as me,o as M,Q as O,n as q,p as w,z as B,e as y,l as H,k as Q,S as ge,b as V,H as he,m as W,O as pe}from"./index-DY2ZM4tI.js";import{F as Z}from"./ArrowLeftIcon-DeKPabn9.js";import{F as ue}from"./PrinterIcon-DaRd9u8L.js";import{F as be}from"./PencilIcon-c7Nm3ZXQ.js";import{F as f}from"./PhotoIcon-DC7Da6Dm.js";import"./utils-CZH8StwO.js";function ye({title:c,titleId:x,...s},j){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:j,"aria-labelledby":x},s),c?n.createElement("title",{id:x},c):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const fe=n.forwardRef(ye),Fe=()=>{var T,F,I,D,L,E,$,P,z;const{id:c}=de(),x=le(),[s,j]=n.useState(null),[U,A]=n.useState(!0),[S,_]=n.useState(null),[d,G]=n.useState(null),[J,N]=n.useState(!1),{user:l}=ie(),{isConnected:je}=ne();n.useEffect(()=>{c&&(async()=>{try{A(!0);const r=await fetch(`/api/quality-tests/${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error("Erro ao carregar dados do teste");const t=await r.json();if(t.success)j(t.data);else throw new Error(t.message||"Erro ao carregar dados do teste")}catch(r){_("Erro ao carregar dados do teste"),console.error("Erro ao carregar teste:",r)}finally{A(!1)}})()},[c]);const k=a=>{switch(a){case"PASS":return{label:"Aprovado",color:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",icon:y,iconColor:"text-green-600 dark:text-green-400"};case"FAIL":return{label:"Reprovado",color:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",icon:pe,iconColor:"text-red-600 dark:text-red-400"};default:return{label:"Pendente",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",icon:w,iconColor:"text-yellow-600 dark:text-yellow-400"}}},C=a=>{switch(a){case"ROUTINE":return"Rotina";case"SPECIAL":return"Especial";case"COMPLAINT":return"Reclamação";default:return a}},K=a=>{switch(a){case"TURNO_1":return"Turno 1 (06:00-14:00)";case"TURNO_2":return"Turno 2 (14:00-22:00)";case"TURNO_3":return"Turno 3 (22:00-06:00)";default:return a}},X=a=>{switch(a){case"HIGH":return{label:"Alta",color:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"};case"MEDIUM":return{label:"Média",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"};case"LOW":return{label:"Baixa",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"};default:return{label:a,color:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}}},R=a=>{G(a),N(!0)},Y=()=>{window.print()},ee=()=>{console.log("Exportar relatório")},se=()=>{x(`/quality/${c}/edit`)},ae=()=>{window.confirm("Tem certeza que deseja excluir este teste?")&&(console.log("Excluir teste"),x("/quality-tests"))};if(U)return e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(S||!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ce,{className:"mx-auto h-12 w-12 text-red-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:S||"Teste não encontrado"}),e.jsx("div",{className:"mt-6",children:e.jsxs(b,{to:"/quality",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Voltar aos Testes"]})})]});const p=k(s.overallResult),re=p.icon,v={visualInspection:s.visualInspection!==null?s.visualInspection?"PASS":"FAIL":null,dimensionalCheck:s.dimensionalCheck!==null?s.dimensionalCheck?"PASS":"FAIL":null,colorConsistency:s.colorConsistency!==null?s.colorConsistency?"PASS":"FAIL":null,surfaceQuality:s.surfaceQuality!==null?s.surfaceQuality?"PASS":"FAIL":null,adhesionTest:s.adhesionTest!==null?s.adhesionTest?"PASS":"FAIL":null},u=Object.values(v).filter(a=>a==="PASS").length,g=Object.values(v).filter(a=>a!==null).length;return e.jsxs(e.Fragment,{children:[e.jsxs(oe,{children:[e.jsx("title",{children:s!=null&&s.id?`Teste ${s.id} - Sistema ZARA`:"Teste de Qualidade - Sistema ZARA"}),e.jsx("meta",{name:"description",content:`Detalhes do teste de qualidade ${(s==null?void 0:s.id)||""}`})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>x("/quality"),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(Z,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Teste ",s.id]}),e.jsxs("span",{className:i("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",p.color),children:[e.jsx(re,{className:i("h-4 w-4 mr-1",p.iconColor)}),p.label]})]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:[((T=s.machine)==null?void 0:T.name)||"N/A"," • ",C(s.testType)||"Teste de Qualidade"," • ",h(s.testDate||s.createdAt)]})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-2",children:[e.jsxs("button",{onClick:Y,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Imprimir"]}),e.jsxs("button",{onClick:ee,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Exportar"]}),((l==null?void 0:l.role)==="ADMIN"||(l==null?void 0:l.role)==="MANAGER"||(l==null?void 0:l.role)==="LEADER"&&s.createdBy.id===l.id)&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:se,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsxs("button",{onClick:ae,className:"inline-flex items-center px-3 py-2 border border-red-300 dark:border-red-600 text-sm font-medium rounded-md text-red-700 dark:text-red-300 bg-white dark:bg-gray-700 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Informações Básicas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(M,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Máquina"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((F=s.machine)==null?void 0:F.name)||"N/A"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:((I=s.machine)==null?void 0:I.location)||"Local não informado"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(O,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Operador"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((D=s.user)==null?void 0:D.name)||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(q,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Produto"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.product||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Lote: ",s.lot||"N/A"]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(w,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Data do Teste"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:h(s.testDate||s.createdAt)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:K(s.shift)||"Turno não informado"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(B,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Detalhes"})]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Caixa #",s.boxNumber||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Tamanho: ",s.packageSize||"N/A"]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(y,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Status"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:i("inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium",s.approved?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"),children:s.approved?"Aprovado":"Reprovado"})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:C(s.testType)||"Teste de Qualidade"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resultados dos Testes"}),e.jsx("div",{className:"space-y-4",children:Object.entries(v).map(([a,r])=>{if(r===null)return null;const t=k(r),o=t.icon,m={visualInspection:"Inspeção Visual",dimensionalCheck:"Verificação Dimensional",colorConsistency:"Consistência de Cor",surfaceQuality:"Qualidade da Superfície",adhesionTest:"Teste de Aderência"};return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o,{className:i("h-5 w-5",t.iconColor)}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m[a]||a})]}),e.jsx("span",{className:i("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",t.color),children:t.label})]},a)})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{children:"Progresso Geral"}),e.jsxs("span",{children:[u,"/",g," testes aprovados"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:i("h-3 rounded-full transition-all duration-300",u===g?"bg-green-500":u>=g*.8?"bg-yellow-500":"bg-red-500"),style:{width:`${g>0?u/g*100:0}%`}})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(H,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Medições e Especificações"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(()=>{const a={};s.packageWidth&&(a.packageWidth={value:s.packageWidth,unit:"mm",spec:"Conforme especificação",status:s.approved?"PASS":"FAIL"}),s.bottomSize&&(a.bottomSize={value:s.bottomSize,unit:"mm",spec:"Conforme especificação",status:s.approved?"PASS":"FAIL"}),s.sideSize&&(a.sideSize={value:s.sideSize,unit:"mm",spec:"Conforme especificação",status:s.approved?"PASS":"FAIL"}),s.zipperDistance&&(a.zipperDistance={value:s.zipperDistance,unit:"mm",spec:"Conforme especificação",status:s.approved?"PASS":"FAIL"}),s.facilitatorDistance&&(a.facilitatorDistance={value:s.facilitatorDistance,unit:"mm",spec:"Conforme especificação",status:s.approved?"PASS":"FAIL"});const r={packageWidth:"Largura da Embalagem",bottomSize:"Tamanho do Fundo",sideSize:"Tamanho da Lateral",zipperDistance:"Distância do Zíper",facilitatorDistance:"Distância do Facilitador"};return Object.entries(a).map(([t,o])=>{const m=k(o.status),te=m.icon;return e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700/50 p-4 rounded-lg border border-gray-200 dark:border-gray-600 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:r[t]||t}),e.jsx(te,{className:i("h-5 w-5",m.iconColor)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline space-x-1",children:[e.jsx("span",{className:i("text-2xl font-bold",o.status==="PASS"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:o.value}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:o.unit})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o.spec}),e.jsx("span",{className:i("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",m.color),children:m.label})]})]})]},t)})})(),!s.packageWidth&&!s.bottomSize&&!s.sideSize&&!s.zipperDistance&&!s.facilitatorDistance&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(B,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhuma medição registrada"})]})]})]}),s.defects&&s.defects.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(Q,{className:"h-6 w-6 text-red-600 dark:text-red-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Defeitos Identificados"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:[s.defects.length," ",s.defects.length===1?"defeito":"defeitos"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:s.defects.map(a=>{const r=X(a.severity);return e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100/50 dark:from-red-900/10 dark:to-red-800/5 border border-red-200 dark:border-red-800 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-1.5 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx(Q,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),e.jsx("span",{className:i("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",r.color),children:r.label})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-900 dark:text-red-100",children:a.description}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.jsxs("span",{className:"text-xs text-red-700 dark:text-red-300",children:[e.jsx("strong",{children:"Local:"})," ",a.location]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.jsxs("span",{className:"text-xs text-red-700 dark:text-red-300",children:[e.jsx("strong",{children:"Medição:"})," ",a.measurement]})]})]})]})]},a.id)})})]}),s.observations&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(fe,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Observações do Teste"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ge,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-100 leading-relaxed",children:s.observations})]})})]}),s.images&&(()=>{try{const a=JSON.parse(s.images);if(a&&a.length>0)return e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Imagens Anexadas"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:[a.length," ",a.length===1?"imagem":"imagens"]})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map((r,t)=>e.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-50 to-purple-100/50 dark:from-purple-900/10 dark:to-purple-800/5 border border-purple-200 dark:border-purple-800 rounded-lg overflow-hidden aspect-square cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-200",onClick:()=>R({name:r,timestamp:s.testDate||s.createdAt}),children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-full",children:e.jsx(f,{className:"h-8 w-8 text-purple-600 dark:text-purple-400"})})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent text-white p-3",children:[e.jsx("p",{className:"text-xs font-medium truncate",title:r,children:r}),e.jsxs("p",{className:"text-xs text-gray-300 mt-1",children:["Imagem #",t+1]})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full p-2 shadow-lg",children:e.jsx(V,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})})}),e.jsx("div",{className:"absolute inset-0 bg-purple-600/10 opacity-0 group-hover:opacity-100 transition-opacity"})]},t))}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.length," imagem",a.length!==1?"s":""," anexada",a.length!==1?"s":""]})})]})}catch(a){console.error("Erro ao parsear imagens:",a)}return null})(),s.corrective_actions&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Ações Corretivas"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:s.corrective_actions})]}),s.nextActions&&s.nextActions.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Próximas Ações"}),e.jsx("ul",{className:"space-y-2",children:s.nextActions.map((a,r)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:a})]},r))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Status e Aprovações"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Criado por"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:((L=s.createdBy)==null?void 0:L.name)||"N/A"})]})]}),s.reviewedBy&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Revisado por"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((E=s.reviewedBy)==null?void 0:E.name)||"N/A"," • ",h(($=s.reviewedBy)==null?void 0:$.timestamp)]})]})]}),s.approvedBy?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Aprovado por"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((P=s.approvedBy)==null?void 0:P.name)||"N/A"," • ",h((z=s.approvedBy)==null?void 0:z.timestamp)]})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Aguardando aprovação"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Pendente"})]})]})]})]}),s.media&&s.media.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Fotos e Documentos"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.media.map(a=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>R(a),children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(f,{className:"h-8 w-8 text-gray-400"})})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(V,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 truncate",children:(a==null?void 0:a.name)||"Sem nome"})]},a.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Ações Rápidas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{to:`/machines/${s.machineId}`,className:"w-full inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Ver Máquina"]}),e.jsxs(b,{to:`/quality-tests?machine=${s.machineId}`,className:"w-full inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Outros Testes"]}),e.jsxs(b,{to:`/reports/quality?batch=${s.productBatch}`,className:"w-full inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Relatório do Lote"]})]})]})]})]})]}),e.jsx(he,{children:J&&d&&e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>N(!1),children:e.jsxs(W.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white dark:bg-gray-800 rounded-lg p-4 max-w-4xl max-h-full overflow-auto",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(d==null?void 0:d.name)||"Imagem"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"×"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"aspect-video bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:[e.jsx(f,{className:"h-16 w-16 text-gray-400"}),e.jsxs("p",{className:"ml-4 text-gray-500 dark:text-gray-400",children:["Imagem: ",(d==null?void 0:d.name)||"Sem nome"]})]})}),d.description&&e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d.description})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:h(d.timestamp)}),e.jsx("button",{className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Download"})]})]})})})]})};export{Fe as default};
//# sourceMappingURL=QualityTestDetail-BDo6SoaM.js.map
