{"version":3,"file":"TeflonChange-jWGVlofG.js","sources":["../../src/pages/TeflonChange.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Helmet } from 'react-helmet-async';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  ArrowLeftIcon,\n  CameraIcon,\n  CalendarIcon,\n  ExclamationTriangleIcon,\n  CheckCircleIcon,\n  WrenchScrewdriverIcon\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '../hooks/useAuth';\nimport { cn } from '../lib/utils';\nimport api from '../services/api';\nimport { useMachinePermissions } from '@/hooks/useMachinePermissions';\n\nconst TeflonChange = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [machines, setMachines] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [photos, setPhotos] = useState([]);\n  \n  const [formData, setFormData] = useState({\n    machineId: '',\n    teflonType: '',\n    expiryDate: '',\n    observations: ''\n  });\n  const [uploadedPhotos, setUploadedPhotos] = useState([]);\n  const { filterMachinesByPermissions, loading: permissionsLoading } = useMachinePermissions();\n\n  const teflonTypes = [\n    { value: 'PTFE', label: 'PTFE - Politetrafluoretileno' },\n    { value: 'FEP', label: 'FEP - Fluorinated Ethylene Propylene' },\n    { value: 'PFA', label: 'PFA - Perfluoroalkoxy' },\n    { value: 'ETFE', label: 'ETFE - Ethylene Tetrafluoroethylene' }\n  ];\n\n  useEffect(() => {\n    // Aguardar as permiss√µes serem carregadas antes de carregar as m√°quinas\n    if (!permissionsLoading) {\n      loadMachines();\n    }\n  }, [permissionsLoading]);\n\n  useEffect(() => {\n    // Calcular data de validade automaticamente (5 dias a partir de hoje)\n    if (formData.teflonType) {\n      const today = new Date();\n      const expiryDate = new Date(today.getTime() + (5 * 24 * 60 * 60 * 1000));\n      setFormData(prev => ({\n        ...prev,\n        expiryDate: expiryDate.toISOString().split('T')[0]\n      }));\n    }\n  }, [formData.teflonType]);\n\n  const loadMachines = async () => {\n    try {\n      console.log('üîÑ TeflonChange: Carregando m√°quinas...', { permissionsLoading, user: user?.role });\n      const response = await api.get('/machines');\n      console.log('üì° TeflonChange: Resposta da API:', response.data);\n      \n      if (response.data && Array.isArray(response.data.data)) {\n        const allMachines = response.data.data;\n        console.log('üìã TeflonChange: M√°quinas recebidas:', allMachines.length);\n        console.log('üîç TeflonChange: Aplicando filtro canOperate...');\n        // Aplicar filtro de permiss√µes - operadores s√≥ podem trocar teflon em m√°quinas que podem operar\n        const filteredMachines = filterMachinesByPermissions(allMachines, 'canOperate');\n        console.log('‚úÖ TeflonChange: M√°quinas ap√≥s filtro canOperate:', filteredMachines.length);\n        \n        if (filteredMachines.length === 0 && user?.role === 'OPERATOR') {\n          console.log('‚ö†Ô∏è TeflonChange: ATEN√á√ÉO - Nenhuma m√°quina dispon√≠vel para operador!');\n          console.log('   Verifique se o operador tem permiss√£o canOperate=true em alguma m√°quina.');\n        }\n        \n        setMachines(filteredMachines);\n      } else {\n        console.log('‚ùå TeflonChange: Resposta inv√°lida da API');\n        setMachines([]);\n      }\n    } catch (err) {\n      console.error('‚ùå TeflonChange: Erro ao carregar m√°quinas:', err);\n      setError('Erro ao carregar lista de m√°quinas');\n      setMachines([]);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handlePhotoUpload = async (e) => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n\n    // Validar tipo de arquivo\n    const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n    const invalidFiles = files.filter(file => !validTypes.includes(file.type));\n    \n    if (invalidFiles.length > 0) {\n      setError('Apenas arquivos de imagem (JPEG, PNG, WebP) s√£o permitidos');\n      return;\n    }\n\n    // Validar tamanho (m√°ximo 5MB por foto)\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    const oversizedFiles = files.filter(file => file.size > maxSize);\n    \n    if (oversizedFiles.length > 0) {\n      setError('Cada foto deve ter no m√°ximo 5MB');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const formDataUpload = new FormData();\n      files.forEach(file => {\n        formDataUpload.append('images', file);\n      });\n      \n      const response = await fetch('/api/upload/teflon-images', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: formDataUpload\n      });\n      \n      const result = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(result.message || 'Erro ao fazer upload das fotos');\n      }\n      \n      const newPhotos = result.data.map(photo => photo.filename);\n      setUploadedPhotos(prev => [...prev, ...newPhotos]);\n      setPhotos(prev => [...prev, ...files]);\n      setError(null);\n    } catch (err) {\n      setError(err.message || 'Erro ao fazer upload das fotos');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const removePhoto = (index) => {\n    setPhotos(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Valida√ß√µes\n    if (!formData.machineId) {\n      setError('Selecione uma m√°quina');\n      return;\n    }\n    \n    if (!formData.teflonType) {\n      setError('Selecione o tipo de teflon');\n      return;\n    }\n    \n    if (uploadedPhotos.length === 0) {\n      setError('√â obrigat√≥rio anexar pelo menos uma foto');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const payload = {\n        machineId: formData.machineId,\n        teflonType: formData.teflonType,\n        expiryDate: formData.expiryDate,\n        observations: formData.observations || '',\n        photos: uploadedPhotos // Enviar os nomes dos arquivos uploadados\n      };\n\n      await api.post('/teflon', payload);\n\n      setSuccess(true);\n      setTimeout(() => {\n        navigate('/teflon');\n      }, 2000);\n      \n    } catch (err) {\n      console.error('Erro ao registrar troca:', err);\n      setError(err.response?.data?.message || 'Erro ao registrar troca de teflon');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <motion.div\n          initial={{ scale: 0 }}\n          animate={{ scale: 1 }}\n          className=\"text-center p-8 bg-white rounded-lg shadow-lg\"\n        >\n          <CheckCircleIcon className=\"h-16 w-16 text-green-500 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Troca Registrada!</h2>\n          <p className=\"text-gray-600\">A troca de teflon foi registrada com sucesso.</p>\n          <p className=\"text-sm text-gray-500 mt-2\">Redirecionando...</p>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Nova Troca de Teflon - Zara Opera√ß√£o</title>\n      </Helmet>\n\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 py-6\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          {/* Header */}\n          <motion.div \n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"mb-8\"\n          >\n            <button\n              onClick={() => navigate('/teflon')}\n              className=\"flex items-center text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white mb-6 transition-colors\"\n            >\n              <ArrowLeftIcon className=\"h-5 w-5 mr-2\" />\n              Voltar para Teflon\n            </button>\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n              <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">Nova Troca de Teflon</h1>\n              <p className=\"text-gray-600 dark:text-gray-400\">Registre uma nova troca de teflon com fotos obrigat√≥rias</p>\n            </div>\n          </motion.div>\n\n          {/* Formul√°rio */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.1 }}\n            className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\"\n          >\n            <form onSubmit={handleSubmit} className=\"space-y-8\">\n              {/* Se√ß√£o: Informa√ß√µes B√°sicas */}\n              <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\n                  <WrenchScrewdriverIcon className=\"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400\" />\n                  Informa√ß√µes B√°sicas\n                </h3>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {/* Sele√ß√£o de M√°quina */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      M√°quina *\n                    </label>\n                    <select\n                      name=\"machineId\"\n                      value={formData.machineId}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-colors\"\n                      required\n                    >\n                      <option value=\"\">Selecione uma m√°quina</option>\n                      {machines.map(machine => (\n                        <option key={machine.id} value={machine.id}>\n                          {machine.name} - {machine.location}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  {/* Tipo de Teflon */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Tipo de Teflon *\n                    </label>\n                    <select\n                      name=\"teflonType\"\n                      value={formData.teflonType}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-colors\"\n                      required\n                    >\n                      <option value=\"\">Selecione o tipo de teflon</option>\n                      {teflonTypes.map(type => (\n                        <option key={type.value} value={type.value}>\n                          {type.label}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </div>\n\n              {/* Se√ß√£o: Detalhes da Troca */}\n              <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\n                  <CalendarIcon className=\"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400\" />\n                  Detalhes da Troca\n                </h3>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {/* Data de Validade (Autom√°tica) */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Data de Validade (Autom√°tica - 5 dias)\n                    </label>\n                    <div className=\"relative\">\n                      <input\n                        type=\"date\"\n                        name=\"expiryDate\"\n                        value={formData.expiryDate}\n                        readOnly\n                        className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400\"\n                      />\n                      <CalendarIcon className=\"absolute right-3 top-3.5 h-5 w-5 text-gray-400\" />\n                    </div>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                      A data de validade √© calculada automaticamente para 5 dias ap√≥s a troca\n                    </p>\n                  </div>\n\n                  {/* Observa√ß√µes */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Observa√ß√µes\n                    </label>\n                    <textarea\n                      name=\"observations\"\n                      value={formData.observations}\n                      onChange={handleInputChange}\n                      rows={4}\n                      className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-colors resize-none\"\n                      placeholder=\"Adicione observa√ß√µes sobre a troca (opcional)\"\n                    />\n                  </div>\n                </div>\n              </div>\n\n              {/* Se√ß√£o: Upload de Fotos */}\n              <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\n                  <CameraIcon className=\"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400\" />\n                  Fotos * (Obrigat√≥rio)\n                </h3>\n                \n                <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors\">\n                  <CameraIcon className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4\" />\n                  <div className=\"space-y-3\">\n                    <label className=\"cursor-pointer\">\n                      <span className=\"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white rounded-lg font-medium transition-colors\">\n                        <CameraIcon className=\"h-5 w-5 mr-2\" />\n                        Selecionar Fotos\n                      </span>\n                      <input\n                        type=\"file\"\n                        multiple\n                        accept=\"image/*\"\n                        onChange={handlePhotoUpload}\n                        className=\"hidden\"\n                      />\n                    </label>\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      Selecione uma ou mais fotos (JPEG, PNG, WebP - m√°x. 5MB cada)\n                    </p>\n                  </div>\n                </div>\n\n                {/* Preview das fotos */}\n                {photos.length > 0 && (\n                  <div className=\"mt-6\">\n                    <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n                      Fotos selecionadas ({photos.length}):\n                    </p>\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                      {photos.map((photo, index) => (\n                        <motion.div \n                          key={index} \n                          initial={{ opacity: 0, scale: 0.8 }}\n                          animate={{ opacity: 1, scale: 1 }}\n                          className=\"relative group\"\n                        >\n                          <img\n                            src={URL.createObjectURL(photo)}\n                            alt={`Foto ${index + 1}`}\n                            className=\"w-full h-28 object-cover rounded-lg border border-gray-200 dark:border-gray-600\"\n                          />\n                          <button\n                            type=\"button\"\n                            onClick={() => removePhoto(index)}\n                            className=\"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-lg transition-colors opacity-0 group-hover:opacity-100\"\n                          >\n                            √ó\n                          </button>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2 truncate\">\n                            {photo.name}\n                          </p>\n                        </motion.div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Mensagens de erro */}\n              {error && (\n                <motion.div \n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  className=\"flex items-center p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\"\n                >\n                  <ExclamationTriangleIcon className=\"h-5 w-5 text-red-500 dark:text-red-400 mr-3 flex-shrink-0\" />\n                  <span className=\"text-red-700 dark:text-red-300\">{error}</span>\n                </motion.div>\n              )}\n\n              {/* Bot√µes */}\n              <div className=\"flex flex-col sm:flex-row gap-4 pt-8\">\n                <button\n                  type=\"button\"\n                  onClick={() => navigate('/teflon')}\n                  className=\"flex-1 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className={cn(\n                    \"flex-1 px-6 py-3 rounded-lg text-white font-medium transition-colors flex items-center justify-center\",\n                    loading\n                      ? \"bg-gray-400 dark:bg-gray-600 cursor-not-allowed\"\n                      : \"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600\"\n                  )}\n                >\n                  {loading ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\n                      Registrando...\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircleIcon className=\"h-5 w-5 mr-2\" />\n                      Registrar Troca\n                    </>\n                  )}\n                </button>\n              </div>\n            </form>\n          </motion.div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default TeflonChange;"],"names":["TeflonChange","user","useAuth","navigate","useNavigate","machines","setMachines","useState","loading","setLoading","error","setError","success","setSuccess","photos","setPhotos","formData","setFormData","uploadedPhotos","setUploadedPhotos","filterMachinesByPermissions","permissionsLoading","useMachinePermissions","teflonTypes","useEffect","loadMachines","today","expiryDate","prev","response","api","allMachines","filteredMachines","err","handleInputChange","e","name","value","handlePhotoUpload","files","validTypes","file","maxSize","formDataUpload","result","newPhotos","photo","removePhoto","index","_","i","handleSubmit","payload","_b","_a","jsx","jsxs","motion","CheckCircleIcon","Fragment","Helmet","ArrowLeftIcon","WrenchScrewdriverIcon","machine","type","CalendarIcon","CameraIcon","ExclamationTriangleIcon","cn"],"mappings":"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"}