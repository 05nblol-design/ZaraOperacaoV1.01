import{j as e}from"./query-B88w_-l3.js";import{r as m}from"./vendor-BKU87Gzz.js";import{u as ye,f as fe,g as ve,j as je,W as be,C as we,A as Ne,o as ke,x as M,c,l as Q,n as J,I as W,m as Y,H as Te,T as Re,U as Pe,w,s as q,p as C,e as N,k as Z,V as K,t as Me}from"./index-DY2ZM4tI.js";import{F as qe}from"./PrinterIcon-DaRd9u8L.js";import{F as Ce}from"./DocumentChartBarIcon-DjX07k2d.js";import"./router-Cr3qqr-L.js";import"./utils-CZH8StwO.js";const Ie=()=>{const[y,X]=m.useState("production"),[k,_]=m.useState("MONTH"),[T,ee]=m.useState("ALL"),[D,te]=m.useState("ALL"),[ae,O]=m.useState(!1),[re,A]=m.useState(!1),[se,E]=m.useState(!1),{user:u}=ye(),{isConnected:R}=fe(),{machines:f}=ve(),{filterMachinesByPermissions:ie}=je(),[i,S]=m.useState({totalProduction:0,totalRunningTime:0,averageEfficiency:0,totalDowntime:0,qualityRate:0,machinePerformance:[]}),$=async()=>{try{const t=await fetch("/api/reports/production-summary",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(t.ok){const a=await t.json();if(a.success){S(a.data);return}}if(f&&f.length>0){const a=ie(f,"canView"),r=a.filter(s=>s.status==="FUNCIONANDO"||s.status==="RUNNING");S({totalProduction:r.length*150,totalRunningTime:r.length*60,averageEfficiency:r.length>0?80:0,totalDowntime:(a.length-r.length)*2,qualityRate:95,machinePerformance:a.map(s=>({machine:s.name||`Máquina ${s.code}`,production:s.status==="FUNCIONANDO"||s.status==="RUNNING"?150:0,efficiency:s.status==="FUNCIONANDO"||s.status==="RUNNING"?80:0,downtime:s.status==="FUNCIONANDO"||s.status==="RUNNING"?0:2}))})}}catch(t){console.error("Erro ao buscar dados de produção para relatórios:",t)}};m.useEffect(()=>{$();const t=setInterval($,6e4);return()=>clearInterval(t)},[f,k,T]);const ne=async()=>{try{O(!0);const a={Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},s=await(await fetch("/api/reports/production-data",{headers:a})).json(),n=await(await fetch("/api/reports/quality-metrics",{headers:a})).json(),p=await(await fetch("/api/reports/machine-performance",{headers:a})).json(),g=await(await fetch("/api/reports/maintenance-data",{headers:a})).json(),x=await(await fetch("/api/reports/operator-productivity",{headers:a})).json();s.success&&n.success&&p.success&&g.success&&x.success&&de(b=>{var B,U,I,H,L,V;return{...b,production:{totalProduction:s.data.total||i.totalProduction||0,targetProduction:16e3,efficiency:p.data.avgEfficiency||i.averageEfficiency||0,downtime:p.data.avgDowntime||i.totalDowntime||0,qualityRate:n.data.approvalRate||i.qualityRate||0,defectRate:100-(n.data.approvalRate||i.qualityRate||0),machineUtilization:p.data.avgUtilization||i.averageEfficiency||0,energyConsumption:1250.5,dailyProduction:((B=s.data.daily)==null?void 0:B.map((o,l)=>{var h;return{date:((h=s.data.labels)==null?void 0:h[l])||new Date().toISOString().split("T")[0],production:o,target:550,efficiency:o/550*100}}))||[],machinePerformance:((U=p.data.machines)==null?void 0:U.length)>0?p.data.machines:i.machinePerformance||[]},quality:{totalTests:n.data.total||0,passedTests:n.data.approved||0,failedTests:n.data.rejected||0,passRate:n.data.approvalRate||0,avgTestTime:n.data.avgTestTime||12.5,criticalDefects:n.data.criticalDefects||0,minorDefects:n.data.minorDefects||0,testsByType:n.data.testsByType||((I=b.quality)==null?void 0:I.testsByType)||[],defectsByCategory:n.data.defectsByCategory||((H=b.quality)==null?void 0:H.defectsByCategory)||[],qualityTrend:((L=n.data.labels)==null?void 0:L.map((o,l)=>{var h,z,G;return{date:o,passRate:(h=n.data.approved)!=null&&h[l]&&n.data.total>0?Math.round(n.data.approved[l]/(n.data.approved[l]+n.data.rejected[l])*100):0,tests:(((z=n.data.approved)==null?void 0:z[l])||0)+(((G=n.data.rejected)==null?void 0:G[l])||0)}}))||((V=b.quality)==null?void 0:V.qualityTrend)||[]},maintenance:{totalMaintenance:g.data.totalMaintenance||0,preventive:g.data.preventive||0,corrective:g.data.corrective||0,avgDowntime:g.data.avgDowntime||0,maintenanceCost:g.data.maintenanceCost||0,plannedVsUnplanned:g.data.plannedVsUnplanned||{planned:0,unplanned:0},maintenanceByMachine:g.data.maintenanceByMachine||[],downtimeTrend:g.data.downtimeTrend||[]},operators:{totalOperators:x.data.length||0,activeOperators:x.data.filter(o=>o.metrics.totalOperations>0).length||0,avgProductivity:x.data.length>0?Math.round(x.data.reduce((o,l)=>o+parseFloat(l.metrics.approvalRate||0),0)/x.data.length*100)/100:0,totalHours:Math.round(x.data.reduce((o,l)=>o+(l.metrics.totalOperationHours||0),0)*100)/100,overtimeHours:0,operatorPerformance:x.data.slice(0,5).map(o=>({name:o.operator.name,shift:"Turno 1",productivity:parseFloat(o.metrics.approvalRate||0),hours:Math.round(o.metrics.totalOperationHours||0),tests:o.metrics.totalQualityTests||0})),shiftPerformance:[{shift:"Turno 1",operators:Math.ceil(x.data.length/3),avgProductivity:97.2,production:5420},{shift:"Turno 2",operators:Math.ceil(x.data.length/3),avgProductivity:94.8,production:4890},{shift:"Turno 3",operators:Math.floor(x.data.length/3),avgProductivity:91.5,production:3110}]}}})}catch(t){console.error("Erro ao buscar dados dos relatórios:",t)}finally{O(!1)}};m.useEffect(()=>{ne()},[y,k,T,D]);const[v,de]=m.useState({production:{totalProduction:i.totalProduction||15420,targetProduction:16e3,efficiency:i.averageEfficiency||96.4,downtime:i.totalDowntime||2.1,qualityRate:i.qualityRate||98.7,defectRate:100-(i.qualityRate||98.7),machineUtilization:i.averageEfficiency||94.2,energyConsumption:1250.5,dailyProduction:[{date:"2024-01-08",production:520,target:550,efficiency:94.5},{date:"2024-01-09",production:545,target:550,efficiency:99.1},{date:"2024-01-10",production:532,target:550,efficiency:96.7},{date:"2024-01-11",production:558,target:550,efficiency:101.5},{date:"2024-01-12",production:541,target:550,efficiency:98.4},{date:"2024-01-13",production:525,target:550,efficiency:95.5},{date:"2024-01-14",production:539,target:550,efficiency:98}],machinePerformance:i.machinePerformance.length>0?i.machinePerformance:[{machine:"Máquina 01",production:3200,efficiency:98.2,downtime:1.2},{machine:"Máquina 02",production:3150,efficiency:96.8,downtime:2.1},{machine:"Máquina 03",production:3080,efficiency:94.5,downtime:3.8},{machine:"Máquina 04",production:3100,efficiency:95.1,downtime:2.9},{machine:"Máquina 05",production:2890,efficiency:88.7,downtime:7.2}]},quality:{totalTests:i.totalTests||1247,passedTests:i.approvedTests||1231,failedTests:i.rejectedTests||16,passRate:i.passRate||98.7,avgTestTime:12.5,criticalDefects:3,minorDefects:13,testsByType:[{type:"Rotina",count:1089,passed:1078,failed:11},{type:"Especial",count:124,passed:121,failed:3},{type:"Reclamação",count:34,passed:32,failed:2}],defectsByCategory:[{category:"Dimensional",count:8,percentage:50},{category:"Visual",count:4,percentage:25},{category:"Aderência",count:2,percentage:12.5},{category:"Cor",count:2,percentage:12.5}],qualityTrend:[{date:"2024-01-08",passRate:97.8,tests:178},{date:"2024-01-09",passRate:98.9,tests:182},{date:"2024-01-10",passRate:98.2,tests:175},{date:"2024-01-11",passRate:99.1,tests:189},{date:"2024-01-12",passRate:98.5,tests:177},{date:"2024-01-13",passRate:97.9,tests:171},{date:"2024-01-14",passRate:99.3,tests:185}]},maintenance:{totalMaintenance:i.totalMaintenance||47,preventive:i.preventiveMaintenance||32,corrective:i.correctiveMaintenance||15,avgDowntime:i.totalDowntime||2.8,maintenanceCost:125400,plannedVsUnplanned:{planned:68.1,unplanned:31.9},maintenanceByMachine:[{machine:"Máquina 01",preventive:6,corrective:2,cost:18500},{machine:"Máquina 02",preventive:7,corrective:3,cost:22100},{machine:"Máquina 03",preventive:8,corrective:4,cost:28900},{machine:"Máquina 04",preventive:6,corrective:3,cost:21200},{machine:"Máquina 05",preventive:5,corrective:3,cost:34700}],downtimeTrend:[{date:"2024-01-08",downtime:3.2,maintenance:2},{date:"2024-01-09",downtime:1.8,maintenance:1},{date:"2024-01-10",downtime:4.1,maintenance:3},{date:"2024-01-11",downtime:2.1,maintenance:1},{date:"2024-01-12",downtime:2.9,maintenance:2},{date:"2024-01-13",downtime:3.8,maintenance:3},{date:"2024-01-14",downtime:1.5,maintenance:1}]},operators:{totalOperators:i.totalOperators||24,activeOperators:i.activeOperators||18,avgProductivity:i.averageProductivity||94.2,totalHours:i.totalHours||1920,overtimeHours:156,operatorPerformance:[{name:"João Silva",shift:"Turno 1",productivity:98.5,hours:160,tests:89},{name:"Maria Santos",shift:"Turno 1",productivity:96.8,hours:158,tests:92},{name:"Carlos Oliveira",shift:"Turno 2",productivity:95.2,hours:162,tests:87},{name:"Ana Lima",shift:"Turno 3",productivity:93.7,hours:155,tests:78},{name:"Pedro Costa",shift:"Turno 1",productivity:97.1,hours:160,tests:85}],shiftPerformance:[{shift:"Turno 1",operators:8,avgProductivity:97.2,production:5420},{shift:"Turno 2",operators:6,avgProductivity:94.8,production:4890},{shift:"Turno 3",operators:4,avgProductivity:91.5,production:3110}]}}),ce=[{id:"production",name:"Produção",icon:Q,description:"Métricas de produção, eficiência e utilização"},{id:"quality",name:"Qualidade",icon:J,description:"Testes de qualidade, defeitos e aprovações"},{id:"maintenance",name:"Manutenção",icon:W,description:"Manutenções preventivas, corretivas e custos"},{id:"operators",name:"Operadores",icon:M,description:"Performance dos operadores e turnos"}],oe=[{id:"M001",name:"Máquina 01"},{id:"M002",name:"Máquina 02"},{id:"M003",name:"Máquina 03"},{id:"M004",name:"Máquina 04"},{id:"M005",name:"Máquina 05"}],le=[{id:"OP001",name:"João Silva"},{id:"OP002",name:"Maria Santos"},{id:"OP003",name:"Carlos Oliveira"},{id:"OP004",name:"Ana Lima"},{id:"OP005",name:"Pedro Costa"}],xe=t=>{console.log(`Exportar relatório em ${t}`)},me=()=>{window.print()},d=({title:t,value:a,change:r,changeType:s,icon:j,color:n="blue",onClick:P})=>{const p={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900/20 dark:text-green-400",red:"bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-400"};return e.jsx("div",{className:c("bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 transition-all duration-200",P&&"cursor-pointer hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600"),onClick:P,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a}),r&&e.jsxs("div",{className:"flex items-center mt-1",children:[s==="increase"?e.jsx(q,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(Me,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsx("span",{className:c("text-sm font-medium",s==="increase"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:r})]})]}),e.jsx("div",{className:c("p-3 rounded-lg",p[n]),children:e.jsx(j,{className:"h-6 w-6"})})]})})},F=()=>{const t=v.production;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Produção Total",value:w(t.totalProduction),change:"+5.2%",changeType:"increase",icon:Q,color:"blue",onClick:()=>A(!0)}),e.jsx(d,{title:"Eficiência",value:`${t.efficiency}%`,change:"+2.1%",changeType:"increase",icon:q,color:"green"}),e.jsx(d,{title:"Tempo de Parada",value:`${t.downtime}h`,change:"-0.8h",changeType:"increase",icon:C,color:"red"}),e.jsx(d,{title:"Taxa de Qualidade",value:`${t.qualityRate}%`,change:"+0.3%",changeType:"increase",icon:N,color:"green"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Produção Diária"}),e.jsx("div",{className:"h-64 flex items-end space-x-2",children:t.dailyProduction.map((a,r)=>{const s=a.production/Math.max(...t.dailyProduction.map(n=>n.production))*100,j=a.target/Math.max(...t.dailyProduction.map(n=>n.production))*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsxs("div",{className:"w-full relative mb-2",style:{height:"200px"},children:[e.jsx("div",{className:"absolute w-full border-t-2 border-dashed border-gray-400",style:{bottom:`${j*2}px`}}),e.jsx("div",{className:c("absolute bottom-0 w-full rounded-t transition-all duration-300",a.production>=a.target?"bg-green-500":"bg-red-500"),style:{height:`${s*2}px`}})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:a.production}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(a.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})]})]},r)})}),e.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-6 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Meta Atingida"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Abaixo da Meta"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-0.5 bg-gray-400 border-dashed"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Meta"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance por Máquina"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Máquina"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Produção"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Eficiência"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tempo de Parada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.machinePerformance.map((a,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:a.machine}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:w(a.production)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mr-2",children:e.jsx("div",{className:c("h-2 rounded-full",a.efficiency>=95?"bg-green-500":a.efficiency>=90?"bg-yellow-500":"bg-red-500"),style:{width:`${a.efficiency}%`}})}),e.jsxs("span",{children:[a.efficiency,"%"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[a.downtime,"h"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:c("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.efficiency>=95?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":a.efficiency>=90?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"),children:a.efficiency>=95?"Excelente":a.efficiency>=90?"Bom":"Atenção"})})]},r))})]})})]})]})},ge=()=>{const t=v.quality;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Total de Testes",value:w(t.totalTests),change:"+12",changeType:"increase",icon:J,color:"blue"}),e.jsx(d,{title:"Taxa de Aprovação",value:`${t.passRate}%`,change:"+0.3%",changeType:"increase",icon:N,color:"green"}),e.jsx(d,{title:"Defeitos Críticos",value:t.criticalDefects,change:"-2",changeType:"increase",icon:Z,color:"red"}),e.jsx(d,{title:"Tempo Médio",value:`${t.avgTestTime}min`,change:"-1.2min",changeType:"increase",icon:C,color:"yellow"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Testes por Tipo"}),e.jsx("div",{className:"space-y-4",children:t.testsByType.map((a,r)=>{const s=a.passed/a.count*100;return e.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.type}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.count," testes"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[a.passed," aprovados"]}),e.jsxs("span",{children:[a.failed," reprovados"]})]})]})},r)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Defeitos por Categoria"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-3",children:t.defectsByCategory.map((a,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:c("w-3 h-3 rounded-full",r===0?"bg-red-500":r===1?"bg-orange-500":r===2?"bg-yellow-500":"bg-blue-500")}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:a.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.count}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["(",a.percentage,"%)"]})]})]},r))}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-gray-200 dark:border-gray-700"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-red-500",style:{clipPath:"polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%)"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t.failedTests}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"})]})})]})})]})]})]})},pe=()=>{const t=v.maintenance;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Total de Manutenções",value:t.totalMaintenance,change:"+3",changeType:"increase",icon:W,color:"blue"}),e.jsx(d,{title:"Preventivas",value:t.preventive,change:"+2",changeType:"increase",icon:N,color:"green"}),e.jsx(d,{title:"Corretivas",value:t.corrective,change:"+1",changeType:"decrease",icon:Z,color:"red"}),e.jsx(d,{title:"Custo Total",value:K(t.maintenanceCost),change:"-R$ 5.2k",changeType:"increase",icon:Ce,color:"yellow",onClick:()=>E(!0)})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Manutenções Planejadas vs Não Planejadas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Planejadas"}),e.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[t.plannedVsUnplanned.planned,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-300",style:{width:`${t.plannedVsUnplanned.planned}%`}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Não Planejadas"}),e.jsxs("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:[t.plannedVsUnplanned.unplanned,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-red-500 h-3 rounded-full transition-all duration-300",style:{width:`${t.plannedVsUnplanned.unplanned}%`}})})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:[t.avgDowntime,"h"]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tempo médio de parada"})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Manutenção por Máquina"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Máquina"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Preventivas"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Corretivas"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Custo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.maintenanceByMachine.map((a,r)=>{const s=a.preventive/(a.preventive+a.corrective);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:a.machine}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:a.preventive}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:a.corrective}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:K(a.cost)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:c("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s>=.8?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":s>=.6?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"),children:s>=.8?"Excelente":s>=.6?"Bom":"Atenção"})})]},r)})})]})})]})]})},ue=()=>{const t=v.operators;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Total de Operadores",value:t.totalOperators,change:"+2",changeType:"increase",icon:M,color:"blue"}),e.jsx(d,{title:"Operadores Ativos",value:t.activeOperators,change:"+1",changeType:"increase",icon:N,color:"green"}),e.jsx(d,{title:"Produtividade Média",value:`${t.avgProductivity}%`,change:"+1.2%",changeType:"increase",icon:q,color:"green"}),e.jsx(d,{title:"Horas Extras",value:`${t.overtimeHours}h`,change:"-12h",changeType:"increase",icon:C,color:"yellow"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance por Turno"}),e.jsx("div",{className:"space-y-4",children:t.shiftPerformance.map((a,r)=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.shift}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.operators," operadores"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Produtividade: "}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[a.avgProductivity,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Produção: "}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w(a.production)})]})]})]})},r))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Operadores"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Operador"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Turno"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Produtividade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Horas"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Testes"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.operatorPerformance.map((a,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:a.shift}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mr-2",children:e.jsx("div",{className:c("h-2 rounded-full",a.productivity>=97?"bg-green-500":a.productivity>=94?"bg-yellow-500":"bg-red-500"),style:{width:`${a.productivity}%`}})}),e.jsxs("span",{children:[a.productivity,"%"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[a.hours,"h"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:a.tests})]},r))})]})})]})]})},he=()=>{switch(y){case"production":return e.jsx(F,{});case"quality":return e.jsx(ge,{});case"maintenance":return e.jsx(pe,{});case"operators":return e.jsx(ue,{});default:return e.jsx(F,{})}};return e.jsxs(e.Fragment,{children:[e.jsxs(be,{children:[e.jsx("title",{children:"Relatórios - Sistema ZARA"}),e.jsx("meta",{name:"description",content:"Relatórios e análises do Sistema ZARA"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Relatórios"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Análises e métricas de performance do sistema"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-2",children:[e.jsxs("button",{onClick:me,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Imprimir"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{onChange:t=>xe(t.target.value),className:"appearance-none bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 py-2 px-4 pr-8 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Exportar"}),e.jsx("option",{value:"pdf",children:"PDF"}),e.jsx("option",{value:"excel",children:"Excel"}),e.jsx("option",{value:"csv",children:"CSV"})]}),e.jsx(we,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:k,onChange:t=>_(t.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"TODAY",children:"Hoje"}),e.jsx("option",{value:"WEEK",children:"Esta Semana"}),e.jsx("option",{value:"MONTH",children:"Este Mês"}),e.jsx("option",{value:"QUARTER",children:"Este Trimestre"}),e.jsx("option",{value:"YEAR",children:"Este Ano"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:T,onChange:t=>ee(t.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"ALL",children:"Todas as Máquinas"}),oe.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),((u==null?void 0:u.role)==="ADMIN"||(u==null?void 0:u.role)==="MANAGER")&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:D,onChange:t=>te(t.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"ALL",children:"Todos os Operadores"}),le.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:c("flex items-center space-x-2 px-3 py-1 rounded-full text-xs font-medium",R?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"),children:[e.jsx("div",{className:c("h-1.5 w-1.5 rounded-full",R?"bg-green-500":"bg-red-500")}),e.jsx("span",{children:R?"Online":"Offline"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ce.map(t=>{const a=t.icon,r=y===t.id;return e.jsx(Y.button,{onClick:()=>X(t.id),className:c("p-4 rounded-lg border-2 text-left transition-all duration-200",r?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-gray-300 dark:hover:border-gray-600"),whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:c("p-2 rounded-lg",r?"bg-blue-100 dark:bg-blue-900/40":"bg-gray-100 dark:bg-gray-700"),children:e.jsx(a,{className:c("h-6 w-6",r?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400")})}),e.jsxs("div",{children:[e.jsx("h3",{className:c("font-medium",r?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"),children:t.name}),e.jsx("p",{className:c("text-sm",r?"text-blue-600 dark:text-blue-300":"text-gray-500 dark:text-gray-400"),children:t.description})]})]})},t.id)})}),e.jsx(Te,{mode:"wait",children:e.jsx(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:ae?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):he()},y)})]}),e.jsx(Re,{isOpen:re,onClose:()=>A(!1)}),e.jsx(Pe,{isOpen:se,onClose:()=>E(!1)})]})};export{Ie as default};
//# sourceMappingURL=Reports-CPRFDIyU.js.map
