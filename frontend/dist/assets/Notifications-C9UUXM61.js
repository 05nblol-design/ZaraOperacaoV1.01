import{j as e}from"./query-B88w_-l3.js";import{r as s}from"./vendor-BKU87Gzz.js";import{u as Z,h as J,L as E,W as X,b as v,y as w,G as K,c as h,D as ee,X as re,m as te,P as T,J as ae,k as b,p as R,E as se,e as I,S as M}from"./index-DY2ZM4tI.js";import{f as le}from"./utils-CZH8StwO.js";import"./router-Cr3qqr-L.js";function de({title:c,titleId:o,...u},g){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:g,"aria-labelledby":o},u),c?s.createElement("title",{id:o},c):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const ie=s.forwardRef(de),be=()=>{const{user:c}=Z(),{notifications:o,loading:u,error:g,unreadCount:y,markAsRead:k,markAllAsRead:U,deleteNotification:A,clearAllNotifications:L,getNotificationsByType:oe,getNotificationsByPriority:ne,getUnreadNotifications:ce,refreshNotifications:j}=J(),[d,x]=s.useState([]),[i,O]=s.useState("all"),[p,F]=s.useState("all"),[N,D]=s.useState(""),[f,$]=s.useState(!1),[C,G]=s.useState("date"),[S,H]=s.useState("desc");s.useEffect(()=>{j()},[]);const P=r=>({QUALITY_TEST:I,MACHINE_STATUS:b,PRODUCTION:M,MAINTENANCE:R,ALERT:b,INFO:M,SUCCESS:I,WARNING:b,ERROR:b})[r]||w,B=(r,t)=>t==="URGENT"?"text-red-600 dark:text-red-400":t==="HIGH"?"text-orange-600 dark:text-orange-400":{QUALITY_TEST:"text-blue-600 dark:text-blue-400",MACHINE_STATUS:"text-yellow-600 dark:text-yellow-400",PRODUCTION:"text-green-600 dark:text-green-400",MAINTENANCE:"text-purple-600 dark:text-purple-400",ALERT:"text-red-600 dark:text-red-400",INFO:"text-blue-600 dark:text-blue-400",SUCCESS:"text-green-600 dark:text-green-400",WARNING:"text-yellow-600 dark:text-yellow-400",ERROR:"text-red-600 dark:text-red-400"}[r]||"text-gray-600 dark:text-gray-400",W=r=>{const t={URGENT:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",HIGH:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",MEDIUM:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",LOW:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return t[r]||t.LOW},_=r=>({QUALITY_TEST:"Teste de Qualidade",MACHINE_STATUS:"Status da Máquina",PRODUCTION:"Produção",MAINTENANCE:"Manutenção",ALERT:"Alerta",INFO:"Informação",SUCCESS:"Sucesso",WARNING:"Aviso",ERROR:"Erro"})[r]||r,n=o.filter(r=>{var t,a,l;if(i!=="all"&&(i==="unread"&&r.read||i==="read"&&!r.read||i!=="unread"&&i!=="read"&&r.type!==i)||p!=="all"&&r.priority!==p)return!1;if(N){const m=N.toLowerCase();return((t=r.title)==null?void 0:t.toLowerCase().includes(m))||((a=r.message)==null?void 0:a.toLowerCase().includes(m))||((l=r.machineId)==null?void 0:l.toLowerCase().includes(m))}return!0}).sort((r,t)=>{let a,l;switch(C){case"priority":const m={URGENT:4,HIGH:3,MEDIUM:2,LOW:1};a=m[r.priority]||0,l=m[t.priority]||0;break;case"type":a=r.type,l=t.type;break;case"read":a=r.read?1:0,l=t.read?1:0;break;default:a=new Date(r.createdAt),l=new Date(t.createdAt)}return S==="asc"?a>l?1:-1:a<l?1:-1}),Q=()=>{d.length===n.length?x([]):x(n.map(r=>r.id))},Y=r=>{x(t=>t.includes(r)?t.filter(a=>a!==r):[...t,r])},q=async()=>{const r=d.filter(t=>{const a=o.find(l=>l.id===t);return a&&!a.read});for(const t of r)await k(t);x([])},z=async()=>{for(const r of d)await A(r);x([])},V=async r=>{r.read||await k(r.id),r.actionUrl&&(window.location.href=r.actionUrl)};return u&&o.length===0?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(E,{size:"lg"})}):e.jsxs(e.Fragment,{children:[e.jsxs(X,{children:[e.jsx("title",{children:"Notificações - Sistema ZARA"}),e.jsx("meta",{name:"description",content:"Central de notificações do sistema ZARA"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notificações"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:y>0?`${y} não lida${y>1?"s":""}`:"Todas as notificações lidas"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[y>0&&e.jsxs("button",{onClick:U,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Marcar todas como lidas"]}),e.jsxs("button",{onClick:j,disabled:u,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[u?e.jsx(E,{size:"sm",className:"mr-2"}):e.jsx(w,{className:"h-4 w-4 mr-2"}),"Atualizar"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar notificações...",value:N,onChange:r=>D(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>$(!f),className:h("inline-flex items-center px-3 py-2 border rounded-md text-sm font-medium transition-colors",f?"border-blue-300 text-blue-700 bg-blue-50 dark:border-blue-600 dark:text-blue-400 dark:bg-blue-900/20":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700"),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Filtros",f?e.jsx(ie,{className:"h-4 w-4 ml-2"}):e.jsx(re,{className:"h-4 w-4 ml-2"})]}),e.jsxs("select",{value:`${C}-${S}`,onChange:r=>{const[t,a]=r.target.value.split("-");G(t),H(a)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"date-desc",children:"Mais recentes"}),e.jsx("option",{value:"date-asc",children:"Mais antigas"}),e.jsx("option",{value:"priority-desc",children:"Maior prioridade"}),e.jsx("option",{value:"priority-asc",children:"Menor prioridade"}),e.jsx("option",{value:"type-asc",children:"Tipo (A-Z)"}),e.jsx("option",{value:"read-asc",children:"Não lidas primeiro"})]})]})]}),f&&e.jsx(te.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo"}),e.jsxs("select",{value:i,onChange:r=>O(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os tipos"}),e.jsx("option",{value:"unread",children:"Não lidas"}),e.jsx("option",{value:"read",children:"Lidas"}),e.jsx("option",{value:"QUALITY_TEST",children:"Teste de Qualidade"}),e.jsx("option",{value:"MACHINE_STATUS",children:"Status da Máquina"}),e.jsx("option",{value:"PRODUCTION",children:"Produção"}),e.jsx("option",{value:"MAINTENANCE",children:"Manutenção"}),e.jsx("option",{value:"ALERT",children:"Alerta"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prioridade"}),e.jsxs("select",{value:p,onChange:r=>F(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas as prioridades"}),e.jsx("option",{value:"URGENT",children:"Urgente"}),e.jsx("option",{value:"HIGH",children:"Alta"}),e.jsx("option",{value:"MEDIUM",children:"Média"}),e.jsx("option",{value:"LOW",children:"Baixa"})]})]})]})})]}),d.length>0&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:[d.length," notificação",d.length>1?"ões":""," selecionada",d.length>1?"s":""]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:q,className:"inline-flex items-center px-3 py-1 text-sm font-medium text-blue-700 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-200 transition-colors",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),"Marcar como lidas"]}),e.jsxs("button",{onClick:z,className:"inline-flex items-center px-3 py-1 text-sm font-medium text-red-700 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 transition-colors",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),"Excluir"]}),e.jsxs("button",{onClick:()=>x([]),className:"inline-flex items-center px-3 py-1 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"Cancelar"]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.length===n.length&&n.length>0,onChange:Q,className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),e.jsxs("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:["Selecionar todas (",n.length,")"]})]})}),e.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[g&&e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(b,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-red-600 dark:text-red-400",children:g}),e.jsx("button",{onClick:j,className:"mt-2 text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Tentar novamente"})]}),!g&&n.length===0&&e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(w,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:N||i!=="all"||p!=="all"?"Nenhuma notificação encontrada com os filtros aplicados":"Nenhuma notificação encontrada"})]}),n.map(r=>{const t=P(r.type),a=d.includes(r.id);return e.jsx("div",{className:h("p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",!r.read&&"bg-blue-50/50 dark:bg-blue-900/10",a&&"bg-blue-100 dark:bg-blue-900/20"),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:()=>Y(r.id),className:"mt-1 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),e.jsx("div",{className:h("flex-shrink-0 mt-0.5",B(r.type,r.priority)),children:e.jsx(t,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:h("text-sm font-medium",r.read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"),children:r.title}),e.jsx("span",{className:h("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",W(r.priority)),children:r.priority==="URGENT"?"Urgente":r.priority==="HIGH"?"Alta":r.priority==="MEDIUM"?"Média":"Baixa"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:_(r.type)})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:r.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-3 w-3"}),e.jsx("span",{children:le(new Date(r.createdAt),{addSuffix:!0,locale:se})})]}),r.machineId&&e.jsxs("span",{children:["Máquina: ",r.machineId]}),r.userId&&r.userId!==(c==null?void 0:c.id)&&e.jsxs("span",{children:["De: ",r.userName||"Sistema"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!r.read&&e.jsx("button",{onClick:()=>k(r.id),className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Marcar como lida",children:e.jsx(v,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>A(r.id),className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Excluir notificação",children:e.jsx(T,{className:"h-4 w-4"})}),r.actionUrl&&e.jsx("button",{onClick:()=>V(r),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Ver detalhes"})]})]})})]})},r.id)})]})]}),o.length>0&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:L,className:"inline-flex items-center px-4 py-2 border border-red-300 dark:border-red-600 rounded-md text-sm font-medium text-red-700 dark:text-red-400 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Limpar todas as notificações"]})})]})]})};export{be as default};
//# sourceMappingURL=Notifications-C9UUXM61.js.map
