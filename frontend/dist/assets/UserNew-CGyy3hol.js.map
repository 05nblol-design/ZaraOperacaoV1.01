{"version":3,"file":"UserNew-CGyy3hol.js","sources":["../../src/pages/UserNew.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport { motion } from 'framer-motion';\nimport {\n  ArrowLeftIcon,\n  CheckCircleIcon,\n  ExclamationTriangleIcon,\n  EyeIcon,\n  EyeSlashIcon\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '@/hooks/useAuth';\nimport { cn } from '@/lib/utils';\nimport api from '@/services/api';\n\nconst UserNew = () => {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    badgeNumber: '',\n    role: 'OPERATOR',\n    isActive: true\n  });\n\n  const roles = [\n    { value: 'OPERATOR', label: 'Operador' },\n    { value: 'LEADER', label: 'Líder' },\n    { value: 'MANAGER', label: 'Gestor' },\n    { value: 'ADMIN', label: 'Administrador' }\n  ];\n\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await api.post('/users', formData);\n\n      if (response.data.success) {\n        setSuccess(true);\n        setTimeout(() => {\n          navigate('/users');\n        }, 2000);\n      }\n    } catch (err) {\n      console.error('Erro ao criar usuário:', err);\n      setError(err.response?.data?.message || 'Erro ao criar usuário');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Verificar se o usuário tem permissão para criar usuários\n  const canCreateUsers = ['MANAGER', 'ADMIN'].includes(user?.role);\n\n  if (!canCreateUsers) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Acesso Negado</h1>\n          <p className=\"text-gray-600\">Você não tem permissão para criar usuários.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Novo Usuário - Zara Operação</title>\n      </Helmet>\n\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={() => navigate('/users')}\n              className=\"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors\"\n            >\n              <ArrowLeftIcon className=\"h-5 w-5 mr-2\" />\n              Voltar\n            </button>\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">Novo Usuário</h1>\n              <p className=\"text-gray-600 mt-2\">\n                Criar um novo usuário no sistema\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Mensagem de erro */}\n        {error && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"bg-red-50 border border-red-200 rounded-md p-4\"\n          >\n            <div className=\"flex\">\n              <ExclamationTriangleIcon className=\"h-5 w-5 text-red-400\" />\n              <div className=\"ml-3\">\n                <p className=\"text-sm text-red-800\">{error}</p>\n              </div>\n            </div>\n          </motion.div>\n        )}\n\n        {/* Mensagem de sucesso */}\n        {success && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"bg-green-50 border border-green-200 rounded-md p-4\"\n          >\n            <div className=\"flex\">\n              <CheckCircleIcon className=\"h-5 w-5 text-green-400\" />\n              <div className=\"ml-3\">\n                <p className=\"text-sm text-green-800\">\n                  Usuário criado com sucesso! Redirecionando...\n                </p>\n              </div>\n            </div>\n          </motion.div>\n        )}\n\n        {/* Formulário */}\n        <div className=\"bg-white shadow rounded-lg\">\n          <div className=\"px-4 py-5 sm:p-6\">\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2\">\n                {/* Nome */}\n                <div>\n                  <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">\n                    Nome Completo *\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"name\"\n                    id=\"name\"\n                    required\n                    value={formData.name}\n                    onChange={handleInputChange}\n                    className=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                    placeholder=\"Digite o nome completo\"\n                  />\n                </div>\n\n                {/* Email */}\n                <div>\n                  <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n                    Email *\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    id=\"email\"\n                    required\n                    value={formData.email}\n                    onChange={handleInputChange}\n                    className=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                    placeholder=\"usuario@empresa.com\"\n                  />\n                </div>\n\n                {/* Número do Crachá */}\n                <div>\n                  <label htmlFor=\"badgeNumber\" className=\"block text-sm font-medium text-gray-700\">\n                    Número do Crachá\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"badgeNumber\"\n                    id=\"badgeNumber\"\n                    value={formData.badgeNumber}\n                    onChange={handleInputChange}\n                    className=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                    placeholder=\"Ex: 171516\"\n                    maxLength={20}\n                  />\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    Número único de identificação do crachá\n                  </p>\n                </div>\n\n                {/* Senha */}\n                <div>\n                  <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                    Senha *\n                  </label>\n                  <div className=\"mt-1 relative\">\n                    <input\n                      type={showPassword ? 'text' : 'password'}\n                      name=\"password\"\n                      id=\"password\"\n                      required\n                      value={formData.password}\n                      onChange={handleInputChange}\n                      className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10\"\n                      placeholder=\"Digite a senha\"\n                      minLength={6}\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowPassword(!showPassword)}\n                      className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\n                    >\n                      {showPassword ? (\n                        <EyeSlashIcon className=\"h-5 w-5 text-gray-400\" />\n                      ) : (\n                        <EyeIcon className=\"h-5 w-5 text-gray-400\" />\n                      )}\n                    </button>\n                  </div>\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    Mínimo de 6 caracteres\n                  </p>\n                </div>\n\n                {/* Role */}\n                <div>\n                  <label htmlFor=\"role\" className=\"block text-sm font-medium text-gray-700\">\n                    Função *\n                  </label>\n                  <select\n                    name=\"role\"\n                    id=\"role\"\n                    required\n                    value={formData.role}\n                    onChange={handleInputChange}\n                    className=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                  >\n                    {roles.map(role => (\n                      <option key={role.value} value={role.value}>\n                        {role.label}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              {/* Status Ativo */}\n              <div className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"isActive\"\n                  id=\"isActive\"\n                  checked={formData.isActive}\n                  onChange={handleInputChange}\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                />\n                <label htmlFor=\"isActive\" className=\"ml-2 block text-sm text-gray-900\">\n                  Usuário ativo\n                </label>\n              </div>\n\n              {/* Botões */}\n              <div className=\"flex justify-end space-x-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => navigate('/users')}\n                  className=\"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className={cn(\n                    \"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white\",\n                    loading\n                      ? \"bg-gray-400 cursor-not-allowed\"\n                      : \"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                  )}\n                >\n                  {loading ? 'Criando...' : 'Criar Usuário'}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default UserNew;"],"names":["UserNew","navigate","useNavigate","user","useAuth","loading","setLoading","useState","error","setError","success","setSuccess","showPassword","setShowPassword","formData","setFormData","roles","handleInputChange","e","name","value","type","checked","prev","handleSubmit","api","err","_b","_a","jsxs","Fragment","jsx","Helmet","ArrowLeftIcon","motion","ExclamationTriangleIcon","CheckCircleIcon","EyeSlashIcon","EyeIcon","role","cn"],"mappings":"8UAeA,MAAMA,EAAU,IAAM,CACpB,MAAMC,EAAWC,EAAA,EACX,CAAE,KAAAC,CAAA,EAASC,EAAA,EACX,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EACtC,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,IAAI,EACjC,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAK,EACtC,CAACK,EAAcC,CAAe,EAAIN,EAAAA,SAAS,EAAK,EAEhD,CAACO,EAAUC,CAAW,EAAIR,WAAS,CACvC,KAAM,GACN,MAAO,GACP,SAAU,GACV,YAAa,GACb,KAAM,WACN,SAAU,EAAA,CACX,EAEKS,EAAQ,CACZ,CAAE,MAAO,WAAY,MAAO,UAAA,EAC5B,CAAE,MAAO,SAAU,MAAO,OAAA,EAC1B,CAAE,MAAO,UAAW,MAAO,QAAA,EAC3B,CAAE,MAAO,QAAS,MAAO,eAAA,CAAgB,EAGrCC,EAAqBC,GAAM,CAC/B,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,KAAAC,EAAM,QAAAC,CAAA,EAAYJ,EAAE,OACzCH,EAAYQ,IAAS,CACnB,GAAGA,EACH,CAACJ,CAAI,EAAGE,IAAS,WAAaC,EAAUF,CAAA,EACxC,CACJ,EAEMI,EAAe,MAAON,GAAM,SAChCA,EAAE,eAAA,EACFZ,EAAW,EAAI,EACfG,EAAS,IAAI,EAEb,GAAI,EACe,MAAMgB,EAAI,KAAK,SAAUX,CAAQ,GAErC,KAAK,UAChBH,EAAW,EAAI,EACf,WAAW,IAAM,CACfV,EAAS,QAAQ,CACnB,EAAG,GAAI,EAEX,OAASyB,EAAK,CACZ,QAAQ,MAAM,yBAA0BA,CAAG,EAC3CjB,IAASkB,GAAAC,EAAAF,EAAI,WAAJ,YAAAE,EAAc,OAAd,YAAAD,EAAoB,UAAW,uBAAuB,CACjE,QAAA,CACErB,EAAW,EAAK,CAClB,CACF,EAKA,MAFuB,CAAC,UAAW,OAAO,EAAE,SAASH,GAAA,YAAAA,EAAM,IAAI,EAc7D0B,EAAAA,KAAAC,WAAA,CACE,SAAA,CAAAC,MAACC,EAAA,CACC,SAAAD,EAAAA,IAAC,QAAA,CAAM,SAAA,8BAAA,CAA4B,EACrC,EAEAF,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAE,EAAAA,IAAC,OAAI,UAAU,oCACb,SAAAF,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM5B,EAAS,QAAQ,EAChC,UAAU,kFAEV,SAAA,CAAA8B,EAAAA,IAACE,EAAA,CAAc,UAAU,cAAA,CAAe,EAAE,QAAA,CAAA,CAAA,SAG3C,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,eAAY,EAC7DA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,kCAAA,CAElC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGCvB,GACCuB,EAAAA,IAACG,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,GAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,UAAU,iDAEV,SAAAL,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAE,EAAAA,IAACI,EAAA,CAAwB,UAAU,sBAAA,CAAuB,EAC1DJ,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAAvB,CAAA,CAAM,CAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CAAA,EAKHE,GACCqB,EAAAA,IAACG,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,GAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,UAAU,qDAEV,SAAAL,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAE,EAAAA,IAACK,EAAA,CAAgB,UAAU,wBAAA,CAAyB,EACpDL,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,+CAAA,CAEtC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAKJA,MAAC,MAAA,CAAI,UAAU,6BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACb,SAAAF,EAAAA,KAAC,OAAA,CAAK,SAAUL,EAAc,UAAU,YACtC,SAAA,CAAAK,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,MAAC,QAAA,CAAM,QAAQ,OAAO,UAAU,0CAA0C,SAAA,kBAE1E,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,KAAK,OACL,GAAG,OACH,SAAQ,GACR,MAAOjB,EAAS,KAChB,SAAUG,EACV,UAAU,8GACV,YAAY,wBAAA,CAAA,CACd,EACF,SAGC,MAAA,CACC,SAAA,CAAAc,MAAC,QAAA,CAAM,QAAQ,QAAQ,UAAU,0CAA0C,SAAA,UAE3E,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,KAAK,QACL,GAAG,QACH,SAAQ,GACR,MAAOjB,EAAS,MAChB,SAAUG,EACV,UAAU,8GACV,YAAY,qBAAA,CAAA,CACd,EACF,SAGC,MAAA,CACC,SAAA,CAAAc,MAAC,QAAA,CAAM,QAAQ,cAAc,UAAU,0CAA0C,SAAA,mBAEjF,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,KAAK,cACL,GAAG,cACH,MAAOjB,EAAS,YAChB,SAAUG,EACV,UAAU,8GACV,YAAY,aACZ,UAAW,EAAA,CAAA,EAEbc,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,yCAAA,CAE1C,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAA,MAAC,QAAA,CAAM,QAAQ,WAAW,UAAU,0CAA0C,SAAA,UAE9E,EACAF,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAE,EAAAA,IAAC,QAAA,CACC,KAAMnB,EAAe,OAAS,WAC9B,KAAK,WACL,GAAG,WACH,SAAQ,GACR,MAAOE,EAAS,SAChB,SAAUG,EACV,UAAU,+GACV,YAAY,iBACZ,UAAW,CAAA,CAAA,EAEbc,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMlB,EAAgB,CAACD,CAAY,EAC5C,UAAU,oDAET,SAAAA,QACEyB,EAAA,CAAa,UAAU,wBAAwB,EAEhDN,EAAAA,IAACO,EAAA,CAAQ,UAAU,uBAAA,CAAwB,CAAA,CAAA,CAE/C,EACF,EACAP,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,wBAAA,CAE1C,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAA,MAAC,QAAA,CAAM,QAAQ,OAAO,UAAU,0CAA0C,SAAA,WAE1E,EACAA,EAAAA,IAAC,SAAA,CACC,KAAK,OACL,GAAG,OACH,SAAQ,GACR,MAAOjB,EAAS,KAChB,SAAUG,EACV,UAAU,8GAET,SAAAD,EAAM,IAAIuB,GACTR,EAAAA,IAAC,SAAA,CAAwB,MAAOQ,EAAK,MAClC,SAAAA,EAAK,KAAA,EADKA,EAAK,KAElB,CACD,CAAA,CAAA,CACH,CAAA,CACF,CAAA,EACF,EAGAV,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAE,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,KAAK,WACL,GAAG,WACH,QAASjB,EAAS,SAClB,SAAUG,EACV,UAAU,mEAAA,CAAA,QAEX,QAAA,CAAM,QAAQ,WAAW,UAAU,mCAAmC,SAAA,eAAA,CAEvE,CAAA,EACF,EAGAY,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAE,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM9B,EAAS,QAAQ,EAChC,UAAU,4LACX,SAAA,UAAA,CAAA,EAGD8B,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAU1B,EACV,UAAWmC,EACT,0FACAnC,EACI,iCACA,uGAAA,EAGL,WAAU,aAAe,eAAA,CAAA,CAC5B,CAAA,CACF,CAAA,CAAA,CACF,EACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,QAjOG,MAAA,CAAI,UAAU,gDACb,SAAAwB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,gBAAa,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,6CAAA,CAA2C,CAAA,CAAA,CAC1E,CAAA,CACF,CA8NN"}